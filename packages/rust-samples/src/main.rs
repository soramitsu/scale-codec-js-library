use parity_scale_codec::{Compact, Encode};
use serde::Serialize;
use std::env;
use std::fmt::{Debug, Display};

fn main() {
    match parse_args().unwrap() {
        RunCommand::Compact => compact::run(),
        RunCommand::Int => int::run(),
        RunCommand::String => string::run(),
    }
}

enum RunCommand {
    Int,
    Compact,
    String,
}

fn parse_args() -> Result<RunCommand, String> {
    let args: Vec<String> = env::args().collect();

    if args.len() != 2 {
        return Err("Expected one command: ints | compacts | strings".to_owned());
    }

    let command = &args[1];
    if command == "ints" {
        Ok(RunCommand::Int)
    } else if command == "compacts" {
        Ok(RunCommand::Compact)
    } else if command == "strings" {
        Ok(RunCommand::String)
    } else {
        Err(format!("Unknown command: {}", command))
    }
}

mod string {
    use super::*;

    #[derive(Debug, Serialize)]
    struct EncodedInfo {
        src: String,
        hex_pure: String,
        hex_scale: String,
    }

    pub fn run() {
        let items: Vec<&str> = vec![
            "Hello, world!",
            "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!",
            "üòÄü•≥üëÄü§¶‚Äç‚ôÇÔ∏è",
            "Êó•Êú¨Ë™û„Åß‰Ωï„Åã",
            "‰∏≠ÊñáÁöÑÊù±Ë•ø",
            r##""–ü—Ä–∏–ø–æ–º–∏–Ω–∞—é —Ç–µ–ø–µ—Ä—å, —Å –∫–∞–∫–∏–º –∂–∞–¥–Ω—ã–º –∏–Ω—Ç–µ—Ä–µ—Å–æ–º —è —Å—Ç–∞–ª —Å–ª–µ–¥–∏—Ç—å —Ç–æ–≥–¥–∞ –∑–∞ –∏—Ö–Ω–µ—é –∂–∏–∑–Ω—å—é; —Ç–∞–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –ø—Ä–µ–∂–¥–µ –Ω–µ –±—ã–≤–∞–ª–æ. –Ø —Å –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∏ —Å –±—Ä–∞–Ω—å—é –∂–¥–∞–ª –∏–Ω–æ–≥–¥–∞ –ö–æ–ª—é, –∫–æ–≥–¥–∞ —Å–∞–º —Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è —Ç–∞–∫ –±–æ–ª–µ–Ω, —á—Ç–æ –Ω–µ –º–æ–≥ –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ –∫–æ–º–Ω–∞—Ç—ã. –Ø –¥–æ —Ç–æ–≥–æ –≤–Ω–∏–∫–∞–ª –≤–æ –≤—Å–µ –º–µ–ª–æ—á–∏, –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª—Å—è –≤—Å—è–∫–∏–º–∏ —Å–ª—É—Ö–∞–º–∏, —á—Ç–æ, –∫–∞–∂–µ—Ç—Å—è, —Å–¥–µ–ª–∞–ª—Å—è —Å–ø–ª–µ—Ç–Ω–∏–∫–æ–º. –Ø –Ω–µ –ø–æ–Ω–∏–º–∞–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ —ç—Ç–∏ –ª—é–¥–∏, –∏–º–µ—è —Å—Ç–æ–ª—å–∫–æ –∂–∏–∑–Ω–∏, –Ω–µ —É–º–µ—é—Ç —Å–¥–µ–ª–∞—Ç—å—Å—è –±–æ–≥–∞—á–∞–º–∏ (–≤–ø—Ä–æ—á–µ–º, –Ω–µ –ø–æ–Ω–∏–º–∞—é –∏ —Ç–µ–ø–µ—Ä—å). –Ø –∑–Ω–∞–ª –æ–¥–Ω–æ–≥–æ –±–µ–¥–Ω—è–∫–∞, –ø—Ä–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–Ω–µ –ø–æ—Ç–æ–º —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∏, —á—Ç–æ –æ–Ω —É–º–µ—Ä —Å –≥–æ–ª–æ–¥—É, –∏, –ø–æ–º–Ω—é, —ç—Ç–æ –≤—ã–≤–µ–ª–æ –º–µ–Ω—è –∏–∑ —Å–µ–±—è: –µ—Å–ª–∏ –±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —ç—Ç–æ–≥–æ –±–µ–¥–Ω—è–∫–∞ –æ–∂–∏–≤–∏—Ç—å, —è –±—ã, –∫–∞–∂–µ—Ç—Å—è, –∫–∞–∑–Ω–∏–ª –µ–≥–æ. –ú–Ω–µ –∏–Ω–æ–≥–¥–∞ —Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å –ª–µ–≥—á–µ –Ω–∞ —Ü–µ–ª—ã–µ –Ω–µ–¥–µ–ª–∏, –∏ —è –º–æ–≥ –≤—ã—Ö–æ–¥–∏—Ç—å –Ω–∞ —É–ª–∏—Ü—É; –Ω–æ —É–ª–∏—Ü–∞ —Å—Ç–∞–ª–∞ –Ω–∞–∫–æ–Ω–µ—Ü –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –≤–æ –º–Ω–µ —Ç–∞–∫–æ–µ –æ–∑–ª–æ–±–ª–µ–Ω–∏–µ, —á—Ç–æ —è –ø–æ —Ü–µ–ª—ã–º –¥–Ω—è–º –Ω–∞—Ä–æ—á–Ω–æ —Å–∏–¥–µ–ª –≤–∑–∞–ø–µ—Ä—Ç–∏, —Ö–æ—Ç—è –∏ –º–æ–≥ –≤—ã—Ö–æ–¥–∏—Ç—å, –∫–∞–∫ –∏ –≤—Å–µ. –Ø –Ω–µ –º–æ–≥ –≤—ã–Ω–æ—Å–∏—Ç—å —ç—Ç–æ–≥–æ —à–Ω—ã—Ä—è—é—â–µ–≥–æ, —Å—É–µ—Ç—è—â–µ–≥–æ—Å—è, –≤–µ—á–Ω–æ –æ–∑–∞–±–æ—á–µ–Ω–Ω–æ–≥–æ, —É–≥—Ä—é–º–æ–≥–æ –∏ –≤—Å—Ç—Ä–µ–≤–æ–∂–µ–Ω–Ω–æ–≥–æ –Ω–∞—Ä–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–æ–≤–∞–ª –æ–∫–æ–ª–æ –º–µ–Ω—è –ø–æ —Ç—Ä–æ—Ç—É–∞—Ä–∞–º. –ö —á–µ–º—É –∏—Ö –≤–µ—á–Ω–∞—è –ø–µ—á–∞–ª—å, –≤–µ—á–Ω–∞—è –∏—Ö —Ç—Ä–µ–≤–æ–≥–∞ –∏ —Å—É–µ—Ç–∞; –≤–µ—á–Ω–∞—è, —É–≥—Ä—é–º–∞—è –∑–ª–æ—Å—Ç—å –∏—Ö (–ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –∑–ª—ã, –∑–ª—ã, –∑–ª—ã)? –ö—Ç–æ –≤–∏–Ω–æ–≤–∞—Ç, —á—Ç–æ –æ–Ω–∏ –Ω–µ—Å—á–∞—Å—Ç–Ω—ã –∏ –Ω–µ —É–º–µ—é—Ç –∂–∏—Ç—å, –∏–º–µ—è –≤–ø–µ—Ä–µ–¥–∏ –ø–æ —à–µ—Å—Ç–∏–¥–µ—Å—è—Ç–∏ –ª–µ—Ç –∂–∏–∑–Ω–∏? –ó–∞—á–µ–º –ó–∞—Ä–Ω–∏—Ü—ã–Ω –¥–æ–ø—É—Å—Ç–∏–ª —Å–µ–±—è —É–º–µ—Ä–µ—Ç—å —Å –≥–æ–ª–æ–¥—É, –∏–º–µ—è —É —Å–µ–±—è —à–µ—Å—Ç—å–¥–µ—Å—è—Ç –ª–µ—Ç –≤–ø–µ—Ä–µ–¥–∏? –ò –∫–∞–∂–¥—ã–π-—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–µ —Ä—É–±–∏—â–µ, —Å–≤–æ–∏ —Ä–∞–±–æ—á–∏–µ —Ä—É–∫–∏, –∑–ª–∏—Ç—Å—è –∏ –∫—Ä–∏—á–∏—Ç: ¬´–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –∫–∞–∫ –≤–æ–ª—ã, –º—ã —Ç—Ä—É–¥–∏–º—Å—è, –º—ã –≥–æ–ª–æ–¥–Ω—ã –∫–∞–∫ —Å–æ–±–∞–∫–∏ –∏ –±–µ–¥–Ω—ã! –î—Ä—É–≥–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –Ω–µ —Ç—Ä—É–¥—è—Ç—Å—è, –∞ –æ–Ω–∏ –±–æ–≥–∞—Ç—ã!¬ª (–í–µ—á–Ω—ã–π –ø—Ä–∏–ø–µ–≤!) –†—è–¥–æ–º —Å –Ω–∏–º–∏ –±–µ–≥–∞–µ—Ç –∏ —Å—É–µ—Ç–∏—Ç—Å—è —Å —É—Ç—Ä–∞ –¥–æ –Ω–æ—á–∏ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–º–æ—Ä—á–æ–∫ ¬´–∏–∑ –±–ª–∞–≥–æ—Ä–æ–¥–Ω—ã—Ö¬ª, –ò–≤–∞–Ω –§–æ–º–∏—á –°—É—Ä–∏–∫–æ–≤, ‚Äì –≤ –Ω–∞—à–µ–º –¥–æ–º–µ, –Ω–∞–¥ –Ω–∞–º–∏ –∂–∏–≤–µ—Ç, ‚Äì –≤–µ—á–Ω–æ —Å –ø—Ä–æ–¥—Ä–∞–Ω–Ω—ã–º–∏ –ª–æ–∫—Ç—è–º–∏, —Å –æ–±—Å—ã–ø–∞–≤—à–∏–º–∏—Å—è –ø—É–≥–æ–≤–∏—Ü–∞–º–∏, —É —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π –Ω–∞ –ø–æ—Å—ã–ª–∫–∞—Ö, –ø–æ —á—å–∏–º-–Ω–∏–±—É–¥—å –ø–æ—Ä—É—á–µ–Ω–∏—è–º, –¥–∞ –µ—â–µ —Å —É—Ç—Ä–∞ –¥–æ –Ω–æ—á–∏. –†–∞–∑–≥–æ–≤–æ—Ä–∏—Ç–µ—Å—å —Å –Ω–∏–º: ¬´–ë–µ–¥–µ–Ω, –Ω–∏—â –∏ —É–±–æ–≥, —É–º–µ—Ä–ª–∞ –∂–µ–Ω–∞, –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –∫—É–ø–∏—Ç—å –±—ã–ª–æ –Ω–µ –Ω–∞ —á—Ç–æ, –∞ –∑–∏–º–æ–π –∑–∞–º–æ—Ä–æ–∑–∏–ª–∏ —Ä–µ–±–µ–Ω–∫–∞; —Å—Ç–∞—Ä—à–∞—è –¥–æ—á—å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω—å–µ –ø–æ—à–ª–∞‚Ä¶¬ª; –≤–µ—á–Ω–æ —Ö–Ω—ã—á–µ—Ç, –≤–µ—á–Ω–æ –ø–ª–∞—á–µ—Ç—Å—è! –û, –Ω–∏–∫–∞–∫–æ–π, –Ω–∏–∫–∞–∫–æ–π –≤–æ –º–Ω–µ –Ω–µ –±—ã–ª–æ –∂–∞–ª–æ—Å—Ç–∏ –∫ —ç—Ç–∏–º –¥—É—Ä–∞–∫–∞–º, –Ω–∏ —Ç–µ–ø–µ—Ä—å, –Ω–∏ –ø—Ä–µ–∂–¥–µ, ‚Äì —è —Å –≥–æ—Ä–¥–æ—Å—Ç—å—é —ç—Ç–æ –≥–æ–≤–æ—Ä—é! –ó–∞—á–µ–º –∂–µ –æ–Ω —Å–∞–º –Ω–µ –†–æ—Ç—à–∏–ª—å–¥? –ö—Ç–æ –≤–∏–Ω–æ–≤–∞—Ç, —á—Ç–æ —É –Ω–µ–≥–æ –Ω–µ—Ç –º–∏–ª–ª–∏–æ–Ω–æ–≤, –∫–∞–∫ —É –†–æ—Ç—à–∏–ª—å–¥–∞, —á—Ç–æ —É –Ω–µ–≥–æ –Ω–µ—Ç –≥–æ—Ä—ã –∑–æ–ª–æ—Ç—ã—Ö –∏–º–ø–µ—Ä–∏–∞–ª–æ–≤ –∏ –Ω–∞–ø–æ–ª–µ–æ–Ω–¥–æ—Ä–æ–≤, —Ç–∞–∫–æ–π –≥–æ—Ä—ã, —Ç–∞–∫–æ–π —Ç–æ—á–Ω–æ –≤—ã—Å–æ–∫–æ–π –≥–æ—Ä—ã, –∫–∞–∫ –Ω–∞ –º–∞—Å–ª–µ–Ω–∏—Ü–µ –ø–æ–¥ –±–∞–ª–∞–≥–∞–Ω–∞–º–∏! –ö–æ–ª–∏ –æ–Ω –∂–∏–≤–µ—Ç, —Å—Ç–∞–ª–æ –±—ã—Ç—å, –≤—Å—ë –≤ –µ–≥–æ –≤–ª–∞—Å—Ç–∏! –ö—Ç–æ –≤–∏–Ω–æ–≤–∞—Ç, —á—Ç–æ –æ–Ω —ç—Ç–æ–≥–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç?" ¬©"##,
            // https://www.w3.org/2001/06/utf-8-test/UTF-8-demo.html
            r#"
            Greek anthem
            Œ£·Ω≤ Œ≥ŒΩœâœÅ·Ω∑Œ∂œâ ·ºÄœÄ·Ω∏ œÑ·Ω¥ŒΩ Œ∫·ΩπœàŒ∑
            œÑŒø·ø¶ œÉœÄŒ±Œ∏ŒπŒø·ø¶ œÑ·Ω¥ŒΩ œÑœÅŒøŒºŒµœÅ·Ωµ,
            œÉ·Ω≤ Œ≥ŒΩœâœÅ·Ω∑Œ∂œâ ·ºÄœÄ·Ω∏ œÑ·Ω¥ŒΩ ·ΩÑœàŒ∑
            œÄŒø·Ω∫ Œº·Ω≤ Œ≤·Ω∑Œ± ŒºŒµœÑœÅ·Ω±ŒµŒπ œÑ·Ω¥ Œ≥·øÜ.
            "#,
            r#"
            Proverbs in the Amharic language:

            ·à∞·àõ·ã≠ ·ä†·ã≠·â≥·à®·àµ ·äï·åâ·à• ·ä†·ã≠·ä®·à∞·àµ·ç¢
            ·â•·àã ·ä´·àà·äù ·ä•·äï·ã∞·ä†·â£·â¥ ·â†·âÜ·àò·å†·äù·ç¢
            ·åå·å• ·ã´·àà·â§·â± ·âÅ·àù·å•·äì ·äê·ãç·ç¢
            ·ã∞·àÄ ·â†·àï·àç·àô ·âÖ·â§ ·â£·ã≠·å†·å£ ·äï·å£·âµ ·â†·åà·ã∞·àà·ãç·ç¢
            ·ã®·ä†·çç ·ãà·àà·àù·â≥ ·â†·âÖ·â§ ·ä†·ã≠·â≥·àΩ·àù·ç¢
            ·ä†·ã≠·å• ·â†·â†·àã ·ã≥·ãã ·â∞·àò·â≥·ç¢
            ·à≤·â∞·à®·åâ·àô ·ã≠·ã∞·à®·åç·àô·ç¢
            ·âÄ·àµ ·â†·âÄ·àµ·ç• ·ãï·äï·âÅ·àã·àç ·â†·ä•·åç·à© ·ã≠·àÑ·ã≥·àç·ç¢
            ·ãµ·à≠ ·â¢·ã´·â•·à≠ ·ä†·äï·â†·à≥ ·ã´·àµ·à≠·ç¢
            ·à∞·ãç ·ä•·äï·ã∞·â§·â± ·ä•·äï·åÖ ·ä•·äï·ã∞ ·åâ·à®·â§·â± ·ä†·ã≠·â∞·ã≥·ã∞·à≠·àù·ç¢
            ·ä•·åç·ãú·à≠ ·ã®·ä®·çà·â∞·ãç·äï ·åâ·àÆ·àÆ ·à≥·ã≠·ãò·åã·ãç ·ä†·ã≠·ãµ·à≠·àù·ç¢
            ·ã®·åé·à®·â§·âµ ·àå·â£·ç• ·â¢·ã´·ã©·âµ ·ã≠·àµ·âÖ ·â£·ã´·ã©·âµ ·ã´·å†·àç·âÖ·ç¢
            ·à•·à´ ·ä®·àò·çç·â≥·âµ ·àç·åÑ·äï ·àã·çã·â≥·âµ·ç¢
            ·ãì·â£·ã≠ ·àõ·ã∞·à™·ã´ ·ã®·àà·ãç·ç• ·åç·äï·ãµ ·ã≠·ãû ·ã≠·ãû·à´·àç·ç¢
            ·ã®·ä•·àµ·àã·àù ·ä†·åà·à© ·àò·ä´ ·ã®·ä†·àû·à´ ·ä†·åà·à© ·ãã·à≠·ä´·ç¢
            ·â∞·äï·åã·àé ·â¢·â∞·çâ ·â∞·àò·àç·à∂ ·â£·çâ·ç¢
            ·ãà·ã≥·åÖ·àÖ ·àõ·à≠ ·â¢·àÜ·äï ·å®·à≠·àµ·àÖ ·ä†·âµ·àã·à∞·ãç·ç¢
            ·ä•·åç·à≠·àÖ·äï ·â†·çç·à´·àΩ·àÖ ·àç·ä≠ ·ãò·à≠·åã·ç¢
            "#,
            r#"
            Mathematics and Sciences:

                ‚àÆ E‚ãÖda = Q,  n ‚Üí ‚àû, ‚àë f(i) = ‚àè g(i), ‚àÄx‚àà‚Ñù: ‚åàx‚åâ = ‚àí‚åä‚àíx‚åã, Œ± ‚àß ¬¨Œ≤ = ¬¨(¬¨Œ± ‚à® Œ≤),

                ‚Ñï ‚äÜ ‚Ñï‚ÇÄ ‚äÇ ‚Ñ§ ‚äÇ ‚Ñö ‚äÇ ‚Ñù ‚äÇ ‚ÑÇ, ‚ä• < a ‚â† b ‚â° c ‚â§ d ‚â™ ‚ä§ ‚áí (A ‚áî B),

                2H‚ÇÇ + O‚ÇÇ ‚áå 2H‚ÇÇO, R = 4.7 kŒ©, ‚åÄ 200 mm

            Linguistics and dictionaries:

                √∞i ƒ±nt…ôÀàn√¶ É…ôn…ôl f…ôÀàn…õtƒ±k …ôso äsiÀàeƒ± Én
                Y [Àà èpsil…în], Yen [j…õn], Yoga [ÀàjoÀêg…ë]

                APL:

                ((V‚ç≥V)=‚ç≥‚ç¥V)/V‚Üê,V    ‚å∑‚Üê‚ç≥‚Üí‚ç¥‚àÜ‚àá‚äÉ‚Äæ‚çé‚çï‚åà
            "#,
            "·öª·õñ ·ö≥·öπ·ö´·ö¶ ·ö¶·ö´·õè ·öª·õñ ·õí·ö¢·õû·õñ ·ö©·öæ ·ö¶·ö´·õó ·õö·ö™·öæ·õû·õñ ·öæ·ö©·ö±·ö¶·öπ·õñ·ö™·ö±·õû·ö¢·õó ·öπ·õÅ·ö¶ ·ö¶·ö™ ·öπ·õñ·õ•·ö´",
            r#"
            ‚°å‚†Å‚†ß‚†ë ‚†º‚†Å‚†í  ‚°ç‚†ú‚†á‚†ë‚†π‚†∞‚†é ‚°£‚†ï‚†å

            ‚°ç‚†ú‚†á‚†ë‚†π ‚†∫‚†Å‚†é ‚†ô‚†ë‚†Å‚†ô‚†í ‚†û‚†ï ‚†É‚†ë‚†õ‚†î ‚†∫‚†ä‚†π‚†≤ ‚°π‚†ª‚†ë ‚†ä‚†é ‚†ù‚†ï ‚†ô‚†≥‚†É‚†û
            ‚†±‚†Å‚†û‚†ë‚†ß‚†ª ‚†Å‚†É‚†≥‚†û ‚†π‚†Å‚†û‚†≤ ‚°π‚†ë ‚†ó‚†ë‚†õ‚†ä‚†å‚†ª ‚†ï‚†ã ‚†ô‚†ä‚†é ‚†É‚†•‚†ó‚†ä‚†Å‚†á ‚†∫‚†Å‚†é
            ‚†é‚†ä‚†õ‚†ù‚†´ ‚†É‚†π ‚†π‚†ë ‚†ä‚†á‚†ª‚†õ‚†π‚†ç‚†Å‚†ù‚†Ç ‚†π‚†ë ‚†ä‚†á‚†ª‚†Ö‚†Ç ‚†π‚†ë ‚†•‚†ù‚†ô‚†ª‚†û‚†Å‚†Ö‚†ª‚†Ç
            ‚†Å‚†ù‚†ô ‚†π‚†ë ‚†°‚†ä‚†ë‚†ã ‚†ç‚†≥‚†ó‚†ù‚†ª‚†≤ ‚°é‚†ä‚†ó‚†ï‚†ï‚†õ‚†ë ‚†é‚†ä‚†õ‚†ù‚†´ ‚†ä‚†û‚†≤ ‚°Å‚†ù‚†ô
            ‚°é‚†ä‚†ó‚†ï‚†ï‚†õ‚†ë‚†∞‚†é ‚†ù‚†Å‚†ç‚†ë ‚†∫‚†Å‚†é ‚†õ‚†ï‚†ï‚†ô ‚†•‚†è‚†ï‚†ù ‚†∞‚°°‚†Å‚†ù‚†õ‚†ë‚†Ç ‚†ã‚†ï‚†ó ‚†Å‚†ù‚†π‚†π‚†î‚†õ ‚†ô‚†ë 
            ‚†°‚†ï‚†é‚†ë ‚†û‚†ï ‚†è‚†•‚†û ‚†ô‚†ä‚†é ‚†ô‚†Å‚†ù‚†ô ‚†û‚†ï‚†≤

            ‚°ï‚†á‚†ô ‚°ç‚†ú‚†á‚†ë‚†π ‚†∫‚†Å‚†é ‚†Å‚†é ‚†ô‚†ë‚†Å‚†ô ‚†Å‚†é ‚†Å ‚†ô‚†ï‚†ï‚†ó‚†§‚†ù‚†Å‚†ä‚†á‚†≤

            ‚°ç‚†î‚†ô‚†ñ ‚°ä ‚†ô‚†ï‚†ù‚†∞‚†û ‚†ç‚†ë‚†Å‚†ù ‚†û‚†ï ‚†é‚†Å‚†π ‚†π‚†Å‚†û ‚°ä ‚†Ö‚†ù‚†™‚†Ç ‚†ï‚†ã ‚†ç‚†π
            ‚†™‚†ù ‚†Ö‚†ù‚†™‚†á‚†´‚†õ‚†ë‚†Ç ‚†±‚†Å‚†û ‚†π‚†ª‚†ë ‚†ä‚†é ‚†è‚†ú‚†û‚†ä‚†ä‚†•‚†á‚†ú‚†á‚†π ‚†ô‚†ë‚†Å‚†ô ‚†Å‚†É‚†≥‚†û
            ‚†Å ‚†ô‚†ï‚†ï‚†ó‚†§‚†ù‚†Å‚†ä‚†á‚†≤ ‚°ä ‚†ç‚†ä‚†£‚†û ‚†ô‚†Å‚†ß‚†ë ‚†É‚†ë‚†≤ ‚†î‚†ä‚†á‚†î‚†´‚†Ç ‚†ç‚†π‚†é‚†ë‚†á‚†ã‚†Ç ‚†û‚†ï
            ‚†ó‚†ë‚†õ‚†ú‚†ô ‚†Å ‚†ä‚†ï‚†ã‚†ã‚†î‚†§‚†ù‚†Å‚†ä‚†á ‚†Å‚†é ‚†π‚†ë ‚†ô‚†ë‚†Å‚†ô‚†ë‚†å ‚†è‚†ä‚†ë‚†ä‚†ë ‚†ï‚†ã ‚†ä‚†ó‚†ï‚†ù‚†ç‚†ï‚†ù‚†õ‚†ª‚†π 
            ‚†î ‚†π‚†ë ‚†û‚†ó‚†Å‚†ô‚†ë‚†≤ ‚°É‚†•‚†û ‚†π‚†ë ‚†∫‚†ä‚†é‚†ô‚†ï‚†ç ‚†ï‚†ã ‚†≥‚†ó ‚†Å‚†ù‚†ä‚†ë‚†å‚†ï‚†ó‚†é 
            ‚†ä‚†é ‚†î ‚†π‚†ë ‚†é‚†ä‚†ç‚†ä‚†á‚†ë‚†Ü ‚†Å‚†ù‚†ô ‚†ç‚†π ‚†•‚†ù‚†ô‚†Å‚†á‚†á‚†™‚†´ ‚†ô‚†Å‚†ù‚†ô‚†é
            ‚†©‚†Å‚†á‚†á ‚†ù‚†ï‚†û ‚†ô‚†ä‚†å‚†•‚†ó‚†É ‚†ä‚†û‚†Ç ‚†ï‚†ó ‚†π‚†ë ‚°ä‚†≥‚†ù‚†û‚†ó‚†π‚†∞‚†é ‚†ô‚†ï‚†ù‚†ë ‚†ã‚†ï‚†ó‚†≤ ‚°π‚†≥
            ‚†∫‚†ä‚†á‚†á ‚†π‚†ª‚†ë‚†ã‚†ï‚†ó‚†ë ‚†è‚†ª‚†ç‚†ä‚†û ‚†ç‚†ë ‚†û‚†ï ‚†ó‚†ë‚†è‚†ë‚†Å‚†û‚†Ç ‚†ë‚†ç‚†è‚†ô‚†Å‚†û‚†ä‚†ä‚†Å‚†á‚†á‚†π‚†Ç ‚†π‚†Å‚†û
            ‚°ç‚†ú‚†á‚†ë‚†π ‚†∫‚†Å‚†é ‚†Å‚†é ‚†ô‚†ë‚†Å‚†ô ‚†Å‚†é ‚†Å ‚†ô‚†ï‚†ï‚†ó‚†§‚†ù‚†Å‚†ä‚†á‚†≤
            "#,
        ];
        let items: Vec<EncodedInfo> = items
            .iter()
            .map(|s| EncodedInfo {
                src: s.to_string(),
                hex_pure: to_hex(&s.as_bytes().to_vec()),
                hex_scale: to_hex(&Encode::encode(s)),
            })
            .collect();

        println!("{}", serde_json::to_string_pretty(&items).unwrap());
    }
}

mod compact {
    use super::*;

    #[derive(Serialize)]
    struct EncodedInfo {
        num: String,
        hex: String,
    }

    pub fn run() {
        let nums: Vec<u128> = vec![
            0,
            u128::pow(2, 8 - 2) - 5,
            u128::pow(2, 14 - 2) - 5,
            u128::pow(2, 16 - 2) - 5,
            u128::pow(2, 24 - 2) - 5,
            u128::pow(2, 32 - 2) - 5,
            u128::pow(2, 40 - 2) - 5,
            u128::pow(2, 48 - 2) - 5,
            u128::pow(2, 64 - 2) - 5,
            u128::MAX,
        ];

        let info: Vec<EncodedInfo> = nums
            .iter()
            .map(|x| EncodedInfo {
                num: x.to_string(),
                hex: to_hex(&(Compact::from(*x).encode())),
            })
            .collect();

        println!("{}", serde_json::to_string_pretty(&info).unwrap());
    }
}

mod int {
    use super::*;
    use generic_nums::*;

    macro_rules! collect_encoded_info_as_vec {
        [$($num:expr),*] => {
            vec![$(collect_int_encoded_info($num)),*]
        };
    }

    pub fn run() {
        let nums: Vec<IntEncodedInfo> = collect_encoded_info_as_vec![
            0u8,
            0u16,
            0u32,
            0u64,
            0u128,
            0i8,
            0i16,
            0i32,
            0i64,
            0i128,
            -1i8,
            -1i16,
            -1i32,
            -1i64,
            -1i128,
            255u8,
            255u16,
            255u32,
            255u64,
            255u128,
            127i8,
            255i16,
            255i32,
            255i64,
            255i128,
            67u8,
            67u16,
            67u32,
            67u128,
            0x12345678u32,
            0x12345678i32,
            -0x12345678i32,
            0x12345678u64,
            -512i32,
            -226123i32,
            256u16,
            256i16,
            1234u32,
            -1234i32,
            -123i64,
            u8::MAX,
            u16::MAX,
            u32::MAX,
            u64::MAX,
            u128::MAX,
            i8::MAX,
            i16::MAX,
            i32::MAX,
            i64::MAX,
            i128::MAX,
            i8::MIN,
            i16::MIN,
            i32::MIN,
            i64::MIN,
            i128::MIN
        ];

        println!("{}", serde_json::to_string_pretty(&nums).unwrap());
    }

    #[derive(Debug, Serialize)]
    struct IntEncodedInfo {
        decimal: String,
        bits: u32,
        signed: bool,
        le: String,
        be: String,
    }

    fn collect_int_encoded_info<T: GenericInt + Display>(value: T) -> IntEncodedInfo {
        let IntMeta { bits, signed } = value.meta();

        IntEncodedInfo {
            decimal: format!("{}", value),
            bits,
            signed,
            le: to_hex(&value.le()),
            be: to_hex(&value.be()),
        }
    }
}

fn to_hex(val: &Vec<u8>) -> String {
    let mut parts: Vec<String> = Vec::with_capacity(val.len());

    for byte in val {
        parts.push(format!("{:0>2x}", byte));
    }

    parts.join(" ")
}

mod generic_nums {
    pub struct IntMeta {
        pub bits: u32,
        pub signed: bool,
    }

    pub trait GenericInt {
        fn be(&self) -> Vec<u8>;
        fn le(&self) -> Vec<u8>;
        fn meta(&self) -> IntMeta;
    }

    macro_rules! impl_generic {
        ($int_uint:ty, $bits:expr, $signed:expr) => {
            impl GenericInt for $int_uint {
                fn be(&self) -> Vec<u8> {
                    self.to_be_bytes().into()
                }

                fn le(&self) -> Vec<u8> {
                    self.to_le_bytes().into()
                }

                fn meta(&self) -> IntMeta {
                    IntMeta {
                        bits: $bits,
                        signed: $signed,
                    }
                }
            }
        };
    }

    impl_generic!(u8, 8, false);
    impl_generic!(u16, 16, false);
    impl_generic!(u32, 32, false);
    impl_generic!(u64, 64, false);
    impl_generic!(u128, 128, false);
    impl_generic!(i8, 8, true);
    impl_generic!(i16, 16, true);
    impl_generic!(i32, 32, true);
    impl_generic!(i64, 64, true);
    impl_generic!(i128, 128, true);
}
